#include <iostream>
#include <vector>
using namespace std;


class Solution{
public:
	int uniquePathsWithObstacles(vector<vector<int>>& obstacleGrid) {
		int m = obstracleGrid.size();
		int n = obstracleGrid[0].size();
		int **f = (int**)malloc(sizeof(int*) * m);
		for (int i = 0; i < m; ++i)
			f[i] = (int*)malloc(sizeof(int*) * n);
		
		if (obstracleGrid[0][0] != 1) f[0][0] = 1;
		else return 0;
			 
		for (int i = 0; i < m; ++i) f[i][0] = 1;
		for (int j = 0; j < n; ++j) f[0][j] = 1;
		
		int upN, leftN;
		for (int i = 1; i < m; ++i)
			for (int j = 1; j < n; ++j){
				/*
				if(obstracleGrid[i-1][j] == 1) upN = 0;
				else upN = f[i-1][j];
				if(obstracleGrid[i][j-1] == 1) leftN = 0;
				else leftN = f[i][j-1];
				*/
				if (abstacleGrid[i][j] == 1) f[i][j] = 0;
				else f[i][j] = upN + leftN; 
			}
		
		int rst = f[m-1][n-1];
		for (int i = 0; i < m; ++i)
			free(f[i]);
		free(f);
		
		return rst;
	}
};


int main(){

}